(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/helang-compress/helang-compress"],{"4de4":function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(e("a34a"));function a(n){return n&&n.__esModule?n:{default:n}}function u(n,t,e,r,a,u,c){try{var i=n[u](c),o=i.value}catch(s){return void e(s)}i.done?t(o):Promise.resolve(o).then(r,a)}function c(n){return function(){var t=this,e=arguments;return new Promise((function(r,a){var c=n.apply(t,e);function i(n){u(c,r,a,i,o,"next",n)}function o(n){u(c,r,a,i,o,"throw",n)}i(void 0)}))}}var i={data:function(){return{pic:"",canvasSize:{width:0,height:0}}},methods:{compress:function(t){var e=this;return new Promise(function(){var a=c(r.default.mark((function a(u,c){var i,o,s,f,l;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.getImageInfo(t.src).then((function(n){return n})).catch((function(n){return n}));case 2:if(i=r.sent,i){r.next=6;break}return c("获取图片信息异常"),r.abrupt("return");case 6:if(o=t.maxSize||1080,s=t.minSize||640,f=i.width,l=i.height,!(f<=s&&l<=s)){r.next=12;break}return u(t.src),r.abrupt("return");case 12:(f>o||l>o)&&(f>l?(l=Math.floor(l/(f/o)),f=o):(f=Math.floor(f/(l/o)),l=o)),e.$set(e,"canvasSize",{width:"".concat(f,"rpx"),height:"".concat(l,"rpx")}),setTimeout((function(){var r=n.createCanvasContext("myCanvas",e);r.clearRect(0,0,f,l),r.drawImage(i.path,0,0,n.upx2px(f),n.upx2px(l)),r.draw(!1,(function(){n.canvasToTempFilePath({x:0,y:0,width:n.upx2px(f),height:n.upx2px(l),destWidth:f,destHeight:l,canvasId:"myCanvas",fileType:t.fileType||"png",quality:t.quality||.9,success:function(n){u(n.tempFilePath)},fail:function(n){c(null)}},e)}))}),300);case 15:case"end":return r.stop()}}),a)})));return function(n,t){return a.apply(this,arguments)}}())},getImageInfo:function(t){return new Promise((function(e,r){n.getImageInfo({src:t,success:function(n){e(n)},fail:function(){r(null)}})}))},batchCompress:function(n){var t=this,e=0,a=0,u=0,i=[],o=function(){return new Promise((function(t,o){var f=function(){var o=c(r.default.mark((function c(){var o;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.progress&&n.progress({done:a,fail:u,count:n.batchSrc.length}),r.next=3,s();case 3:o=r.sent,o?(a++,i.push(o)):u++,e++,e>=n.batchSrc.length?t(!0):f();case 7:case"end":return r.stop()}}),c)})));return function(){return o.apply(this,arguments)}}();f()}))},s=function(){return t.compress({src:n.batchSrc[e],maxSize:n.maxSize,fileType:n.fileType,quality:n.quality,minSize:n.minSize})};return new Promise(function(){var n=c(r.default.mark((function n(t,e){var a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:a=n.sent,a?t(i):e(null);case 4:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())}}};t.default=i}).call(this,e("543d")["default"])},"51a2":function(n,t,e){},7587:function(n,t,e){"use strict";var r=e("51a2"),a=e.n(r);a.a},"98b3":function(n,t,e){"use strict";var r;e.d(t,"b",(function(){return a})),e.d(t,"c",(function(){return u})),e.d(t,"a",(function(){return r}));var a=function(){var n=this,t=n.$createElement;n._self._c},u=[]},b85a:function(n,t,e){"use strict";e.r(t);var r=e("4de4"),a=e.n(r);for(var u in r)"default"!==u&&function(n){e.d(t,n,(function(){return r[n]}))}(u);t["default"]=a.a},c0a7:function(n,t,e){"use strict";e.r(t);var r=e("98b3"),a=e("b85a");for(var u in a)"default"!==u&&function(n){e.d(t,n,(function(){return a[n]}))}(u);e("7587");var c,i=e("f0c5"),o=Object(i["a"])(a["default"],r["b"],r["c"],!1,null,"7764d5fe",null,!1,r["a"],c);t["default"]=o.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/helang-compress/helang-compress-create-component',
    {
        'components/helang-compress/helang-compress-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("c0a7"))
        })
    },
    [['components/helang-compress/helang-compress-create-component']]
]);
